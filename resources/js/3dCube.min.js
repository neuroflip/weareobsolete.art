var canvasWidth=265,canvasHeight=265,scaleFactor=1.1,xoffset=0,yoffset=0,zOff=150,Cube3d=function(t){this.canvas=t,this.canvasCtx=this.canvas.getContext("2d"),this.canvas.width=canvasWidth,this.canvas.height=canvasHeight,this.canvasCtx.lineWidth=.5,createCubeData.call(this)};function animate(){xrotate.call(this,.01),yrotate.call(this,.01)}function clearCtx(){this.canvasCtx.fillStyle="#000",this.canvasCtx.fillRect(0,0,this.canvas.width,this.canvas.height)}function transformCube3DTo2D(){for(var t=0;t<8;t++)this.cube2d[t][0]=Math.floor(this.cube3d[t][0]*scaleFactor*80/this.cube3d[t][2]*scaleFactor+this.canvas.width/2),this.cube2d[t][1]=Math.floor(this.cube3d[t][1]*scaleFactor*80/this.cube3d[t][2]*scaleFactor+this.canvas.height/2)}function createCubeData(){this.cube2d=createArray(8,2),this.cube3d=createArray(8,3),this.cube3d[0][0]=-50,this.cube3d[0][1]=50,this.cube3d[0][2]=zOff-50,this.cube3d[1][0]=50,this.cube3d[1][1]=50,this.cube3d[1][2]=zOff-50,this.cube3d[2][0]=-50,this.cube3d[2][1]=-50,this.cube3d[2][2]=zOff-50,this.cube3d[3][0]=50,this.cube3d[3][1]=-50,this.cube3d[3][2]=zOff-50,this.cube3d[4][0]=-50,this.cube3d[4][1]=50,this.cube3d[4][2]=zOff+50,this.cube3d[5][0]=50,this.cube3d[5][1]=50,this.cube3d[5][2]=zOff+50,this.cube3d[6][0]=-50,this.cube3d[6][1]=-50,this.cube3d[6][2]=zOff+50,this.cube3d[7][0]=50,this.cube3d[7][1]=-50,this.cube3d[7][2]=zOff+50,xrotate.call(this,.1),yrotate.call(this,-.99)}function zrotate(t){for(var i,s,e,c=0;c<8;c++)i=this.cube3d[c][0],s=this.cube3d[c][1],e=i*Math.cos(t)-s*Math.sin(t),s=i*Math.sin(t)+s*Math.cos(t),i=e,this.cube3d[c][0]=i,this.cube3d[c][1]=s}function yrotate(t){for(var i,s,e,c=0;c<8;c++)i=this.cube3d[c][0],e=(s=this.cube3d[c][2]-zOff)*Math.cos(t)-i*Math.sin(t),i=s*Math.sin(t)+i*Math.cos(t),s=e,this.cube3d[c][0]=i,this.cube3d[c][2]=s+zOff}function xrotate(t){for(var i,s,e,c=0;c<8;c++)i=this.cube3d[c][1],s=this.cube3d[c][2]-zOff,e=i*Math.cos(t)-s*Math.sin(t),s=i*Math.sin(t)+s*Math.cos(t),i=e,this.cube3d[c][1]=i,this.cube3d[c][2]=s+zOff}function scale(t){for(var i=0;i<8;i++)this.cube3d[i][0]=this.cube3d[i][0]*t,this.cube3d[i][1]=this.cube3d[i][1]*t,this.cube3d[i][2]=this.cube3d[i][2]*t}function drawLine(t,i,s,e,c){this.canvasCtx.strokeStyle=c,this.canvasCtx.shadowColor=c,this.canvasCtx.shadowOffsetX=0,this.canvasCtx.shadowOffsetY=0,this.canvasCtx.beginPath(),this.canvasCtx.moveTo(t,i),this.canvasCtx.lineTo(s,e),this.canvasCtx.stroke()}function draw_cube(t,i){var s="#fff";drawLine.call(this,this.cube2d[0][0]+0,this.cube2d[0][1]+0,this.cube2d[1][0]+0,this.cube2d[1][1]+0,s),drawLine.call(this,this.cube2d[0][0]+0,this.cube2d[0][1]+0,this.cube2d[2][0]+0,this.cube2d[2][1]+0,s),drawLine.call(this,this.cube2d[0][0]+0,this.cube2d[0][1]+0,this.cube2d[4][0]+0,this.cube2d[4][1]+0,s),drawLine.call(this,this.cube2d[1][0]+0,this.cube2d[1][1]+0,this.cube2d[5][0]+0,this.cube2d[5][1]+0,s),drawLine.call(this,this.cube2d[1][0]+0,this.cube2d[1][1]+0,this.cube2d[3][0]+0,this.cube2d[3][1]+0,s),drawLine.call(this,this.cube2d[2][0]+0,this.cube2d[2][1]+0,this.cube2d[6][0]+0,this.cube2d[6][1]+0,s),drawLine.call(this,this.cube2d[2][0]+0,this.cube2d[2][1]+0,this.cube2d[3][0]+0,this.cube2d[3][1]+0,s),drawLine.call(this,this.cube2d[4][0]+0,this.cube2d[4][1]+0,this.cube2d[6][0]+0,this.cube2d[6][1]+0,s),drawLine.call(this,this.cube2d[4][0]+0,this.cube2d[4][1]+0,this.cube2d[5][0]+0,this.cube2d[5][1]+0,s),drawLine.call(this,this.cube2d[7][0]+0,this.cube2d[7][1]+0,this.cube2d[6][0]+0,this.cube2d[6][1]+0,s),drawLine.call(this,this.cube2d[7][0]+0,this.cube2d[7][1]+0,this.cube2d[3][0]+0,this.cube2d[3][1]+0,s),drawLine.call(this,this.cube2d[7][0]+0,this.cube2d[7][1]+0,this.cube2d[5][0]+0,this.cube2d[5][1]+0,s)}function createArray(t){var i=new Array(t||0),s=t;if(arguments.length>1)for(var e=Array.prototype.slice.call(arguments,1);s--;)i[t-1-s]=createArray.apply(this,e);return i}Cube3d.prototype={Constructor:Cube3d,requestAnimationFrameID:null,canvas:null,canvasCtx:null,cube:null,xangle:0,yangle:0,isAnimationInitiated:!1,render:function(){this.isAnimationInitiated||(setInterval(animate.bind(this),5),this.isAnimationInitiated=!0),clearCtx.call(this),transformCube3DTo2D.call(this),draw_cube.call(this,xoffset,yoffset),this.requestAnimationFrameID=window.requestAnimationFrame(this.render.bind(this),this.canvas)}};